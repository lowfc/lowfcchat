{% extends 'basic.html' %}

{% block title %}
Администрирование
{% endblock %}

{% block body %}

<div class="container mt-5">
    <center><h1>Менеджмент пользователей</h1></center>
    <form method="post">
        <input type="text" name = 'login' class="form-control" placeholder="login"><br>
        <input type="password" name = 'password' class="form-control" placeholder="password"><br>
        <input type="text" name = 'firstname' class="form-control" placeholder="firstname"><br>
        <input type="text" name = 'lastname' class="form-control" placeholder="lastname"><br>
        <input type="submit" class="btn btn-success" value="Submit"><br>
    </form>
</div>

<div class="container mt-5">
    {% for i in users %}
    <div class="alert alert-info">
        <h5> <u><i>#{{ i.id }}</i></u> {{ i.lastname }} {{ i.firstname }}</h5>
        <p><i>{{ i.login }}</i> {{ i.lastname }} {{ i.firstname }}, зарегестрирован от
        {{ i.regDate }} UTC</p>
        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal3{{i.id}}">
          Удалить
        </button>
        <button class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg{{ i.id }}">
          Изменить
        </button>
        <!-- Button trigger modal 1 -->
        <div class="modal fade" id="exampleModal3{{i.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModal3Label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModal3Label">Удаление user#{{ i.id }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                Вы действительно хотите удалить аккаунт {{ i.firstname }} {{ i.lastname }}?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <a href="/admin-add-user/delete/{{ i.id }}" class="btn btn-danger">Удалить</a>
              </div>
            </div>
          </div>
        </div>
        <!-- Button trigger modal 1 -->

        <!-- Button trigger modal 2 -->
        <div class="modal fade bd-example-modal-lg{{ i.id }}" tabindex="-1" role="dialog"
        aria-labelledby="myLargeModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <form method="post" class="container mt-5 b-50">
                <input type="hidden" name="isEdit" value="1">
                  <input type="hidden" name="currentId" value="{{ i.id }}">
                <input type="text" name = 'id' class="form-control" placeholder="id" value="{{ i.id }}"><br>
                <input type="text" name = 'login' class="form-control" placeholder="Логин" value="{{ i.login }}"><br>
                <input type="password" name = 'password' class="form-control" placeholder="Пароль"><br>
                <input type="text" name = 'firstname' class="form-control" placeholder="Имя" value="{{ i.firstname }}"><br>
                <input type="text" name = 'lastname' class="form-control" placeholder="Фамилия" value="{{ i.lastname }}"><br>
                <p><input type = 'checkbox' name = 'passRec' value = '1'> Изменить пароль</p>
                <input type="submit" class="btn btn-success" value="Submit"><br>
              </form>
            </div>
          </div>
        </div>
        <!-- Button trigger modal 2 -->
    </div>
    {% endfor %}
</div>
{% endblock %}